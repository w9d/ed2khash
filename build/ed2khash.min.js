/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var m,ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function ca(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var da=ca(this);
function p(a,b){if(b)a:{var c=da;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ba(c,a,{configurable:!0,writable:!0,value:b})}}function ea(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}
p("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=ea(this,b,"startsWith"),e=d.length,f=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<f&&c<e;)if(d[c++]!=b[g++])return!1;return g>=f}});p("String.prototype.repeat",function(a){return a?a:function(b){var c=ea(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}});
p("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});p("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991});p("String.prototype.padStart",function(a){return a?a:function(b,c){var d=ea(this,null,"padStart");b-=d.length;c=void 0!==c?String(c):" ";return(0<b&&c?c.repeat(Math.ceil(b/c.length)).substring(0,b):"")+d}});var ma=this||self;
function na(a,b){function c(){}c.prototype=b.prototype;a.W=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.V=function(d,e,f){for(var g=Array(arguments.length-2),n=2;n<arguments.length;n++)g[n-2]=arguments[n];return b.prototype[e].apply(d,g)}};function x(a,b,c){this.b=a|0;this.a=b|0;this.c=!!c}var oa={},pa={};function z(a,b){var c;if(b){a>>>=0;if(b=0<=a&&256>a)if(c=pa[a])return c;c=A(a,0>(a|0)?-1:0,!0);b&&(pa[a]=c)}else{a|=0;if(b=-128<=a&&128>a)if(c=oa[a])return c;c=A(a,0>a?-1:0,!1);b&&(oa[a]=c)}return c}function C(a,b){if(isNaN(a))return b?E:F;if(b){if(0>a)return E;if(a>=qa)return ra}else{if(a<=-sa)return G;if(a+1>=sa)return ta}return 0>a?C(-a,b).g():A(a%4294967296|0,a/4294967296|0,b)}function A(a,b,c){return new x(a,b,c)}
var ua=Math.pow,qa=4294967296*4294967296,sa=qa/2,va=z(16777216),F=z(0),E=z(0,!0),I=z(1),wa=z(1,!0),xa=z(-1),ta=A(-1,2147483647,!1),ra=A(-1,-1,!0),G=A(0,-2147483648,!1);function J(a){return a.c?4294967296*(a.a>>>0)+(a.b>>>0):4294967296*a.a+(a.b>>>0)}m=x.prototype;
m.toString=function(a){a=a||10;if(2>a||36<a)throw RangeError("radix");if(K(this))return"0";if(L(this)){if(this.j(G)){var b=C(a),c=this.m(b);b=c.l(b).sub(this);return c.toString(a)+(b.c?b.b>>>0:b.b).toString(a)}return"-"+this.g().toString(a)}c=C(ua(a,6),this.c);var d=this;for(b="";;){var e=d.m(c);d=d.sub(e.l(c));var f=((d.c?d.b>>>0:d.b)>>>0).toString(a);d=e;if(K(d))return f+b;for(;6>f.length;)f="0"+f;b=f+b}};function K(a){return 0===a.a&&0===a.b}function L(a){return!a.c&&0>a.a}
m.D=function(a){return this.c!==a.c&&1===this.a>>>31&&1===a.a>>>31?!1:this.a===a.a&&this.b===a.b};m.j=x.prototype.D;m.I=function(a){return 0>this.s(a)};m.B=x.prototype.I;m.F=function(a){return 0<this.s(a)};m.u=x.prototype.F;m.G=function(a){return 0<=this.s(a)};m.H=x.prototype.G;m.K=function(a){if(this.j(a))return 0;var b=L(this),c=L(a);return b&&!c?-1:!b&&c?1:this.c?a.a>>>0>this.a>>>0||a.a===this.a&&a.b>>>0>this.b>>>0?-1:1:L(this.sub(a))?-1:1};m.s=x.prototype.K;
m.N=function(){return!this.c&&this.j(G)?G:A(~this.b,~this.a,this.c).add(I)};m.g=x.prototype.N;m.add=function(a){var b=this.a>>>16,c=this.a&65535,d=this.b>>>16,e=a.a>>>16,f=a.a&65535,g=a.b>>>16;a=(this.b&65535)+(a.b&65535);g=(a>>>16)+(d+g);d=g>>>16;d+=c+f;b=(d>>>16)+(b+e)&65535;return A((g&65535)<<16|a&65535,b<<16|d&65535,this.c)};m.U=function(a){return this.add(a.g())};m.sub=x.prototype.U;
m.L=function(a){if(K(this)||K(a))return F;if(this.j(G))return 1===(a.b&1)?G:F;if(a.j(G))return 1===(this.b&1)?G:F;if(L(this))return L(a)?this.g().l(a.g()):this.g().l(a).g();if(L(a))return this.l(a.g()).g();if(this.B(va)&&a.B(va))return C(J(this)*J(a),this.c);var b=this.a>>>16,c=this.a&65535,d=this.b>>>16,e=this.b&65535,f=a.a>>>16,g=a.a&65535,n=a.b>>>16;a=a.b&65535;var y=e*a;var t=(y>>>16)+d*a;var r=t>>>16;t=(t&65535)+e*n;r+=t>>>16;r+=c*a;var u=r>>>16;r=(r&65535)+d*n;u+=r>>>16;r=(r&65535)+e*g;u=u+
(r>>>16)+(b*a+c*n+d*g+e*f)&65535;return A((t&65535)<<16|y&65535,u<<16|r&65535,this.c)};m.l=x.prototype.L;
m.C=function(a){if(K(a))throw Error("division by zero");if(K(this))return this.c?E:F;if(this.c){a.c||(a=a.c?a:A(a.b,a.a,!0));if(a.u(this))return E;if(a.u(this.T(1)))return wa;var b=E}else{if(this.j(G)){if(a.j(I)||a.j(xa))return G;if(a.j(G))return I;var c=this.S(1).m(a).R(1);if(c.j(F))return L(a)?I:xa;var d=this.sub(a.l(c));return b=c.add(d.m(a))}if(a.j(G))return this.c?E:F;if(L(this))return L(a)?this.g().m(a.g()):this.g().m(a).g();if(L(a))return this.m(a.g()).g();b=F}for(d=this;d.H(a);){c=Math.max(1,
Math.floor(J(d)/J(a)));var e=Math.ceil(Math.log(c)/Math.LN2);e=48>=e?1:ua(2,e-48);for(var f=C(c),g=f.l(a);L(g)||g.u(d);)c-=e,f=C(c,this.c),g=f.l(a);K(f)&&(f=I);b=b.add(f);d=d.sub(g)}return b};m.m=x.prototype.C;m.and=function(a){return A(this.b&a.b,this.a&a.a,this.c)};m.or=function(a){return A(this.b|a.b,this.a|a.a,this.c)};m.xor=function(a){return A(this.b^a.b,this.a^a.a,this.c)};m.M=function(a){return 0===(a&=63)?this:32>a?A(this.b<<a,this.a<<a|this.b>>>32-a,this.c):A(0,this.b<<a-32,this.c)};
m.R=x.prototype.M;m.O=function(a){return 0===(a&=63)?this:32>a?A(this.b>>>a|this.a<<32-a,this.a>>a,this.c):A(this.a>>a-32,0<=this.a?0:-1,this.c)};m.S=x.prototype.O;m.P=function(a){a&=63;if(0===a)return this;var b=this.a;return 32>a?A(this.b>>>a|b<<32-a,b>>>a,this.c):32===a?A(b,0,this.c):A(b>>>a-32,0,this.c)};m.T=x.prototype.P;var M;
M=function(a){switch(a[0]){case "i":return a=a.match(/^i-?\d+e/)[0],[a.length,+a.slice(1,-1)];case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":var b=a.match(/^\d+/)[0];var c=b.length+1;a=a.slice(0,c+ +b);return[a.length,a.slice(c)];case "l":c=1;for(b=[];"e"!==a[c];){var d=M(a.slice(c));var e=d[0];d=d[1];c+=e;b.push(d)}return[c+1,b];case "d":c=1;for(e={};"e"!==a[c];){d=M(a.slice(c));b=d[0];d=d[1];var f=M(a.slice(c+b));var g=f[0];f=f[1];c+=b+g;e[d]=f}return[c+1,
e]}};var N,ya,za,Ga,Ha;Ha=function(a){return""+a.length+":"+a};za=function(a){return"i"+a+"e"};Ga=function(a){for(var b,c=[],d=0,e=a.length;d<e;++d)b=a[d],c.push(N(b));return"l"+c.join("")+"e"};ya=function(a){var b;var c=function(d){for(b in a)({}).hasOwnProperty.call(a,b)&&d.push(b);return d}.call(this,[]).sort();return"d"+function(d){for(var e=0,f=c.length;e<f;++e)b=c[e],d.push(""+N(b)+N(a[b]));return d}.call(this,[]).join("")+"e"};
var Ia=N=function(a){switch(!1){case "string"!==typeof a:return Ha(a);case "number"!==typeof a:return za(Math.floor(a));case "[object Array]"!=={}.toString.call(a):return Ga(a);default:return ya(a)}};var Ja=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=Array(c),e="string"===typeof a?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d};function Ka(a){return Ja(a,function(b){b=b.toString(16);return 1<b.length?b:"0"+b}).join("")};function La(){this.b=-1};function Ma(){this.b=64;this.a=[];this.v=[];this.J=[];this.o=[];this.o[0]=128;for(var a=1;a<this.b;++a)this.o[a]=0;this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.a[4]=3285377520;this.A=this.c=0}na(Ma,La);
function S(a,b,c){c||(c=0);var d=a.J;if("string"===typeof b)for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.a[0];c=a.a[1];var g=a.a[2],n=a.a[3],y=a.a[4];for(e=0;80>e;e++){if(40>e)if(20>e){f=n^c&(g^n);var t=1518500249}else f=c^g^n,t=1859775393;else 60>e?(f=c&g|n&(c|g),t=2400959708):
(f=c^g^n,t=3395469782);f=(b<<5|b>>>27)+f+y+t+d[e]&4294967295;y=n;n=g;g=(c<<30|c>>>2)&4294967295;c=b;b=f}a.a[0]=a.a[0]+b&4294967295;a.a[1]=a.a[1]+c&4294967295;a.a[2]=a.a[2]+g&4294967295;a.a[3]=a.a[3]+n&4294967295;a.a[4]=a.a[4]+y&4294967295}
function Na(a,b,c){if(null!=b){void 0===c&&(c=b.length);for(var d=c-a.b,e=0,f=a.v,g=a.c;e<c;){if(0==g)for(;e<=d;)S(a,b,e),e+=a.b;if("string"===typeof b)for(;e<c;){if(f[g]=b.charCodeAt(e),++g,++e,g==a.b){S(a,f);g=0;break}}else for(;e<c;)if(f[g]=b[e],++g,++e,g==a.b){S(a,f);g=0;break}}a.c=g;a.A+=c}};function Oa(a){this.b=this.c=this.a=void 0;if(!a||"string"!==typeof a)throw"internal problem: I'm not being used correctly";if(33554432<a.length)throw"torrent over arbitrary limit of 32MiB";var b=M(a)[1];Pa(a,b);this.b=b.info.name;this.c=Qa(b);a=new Ma;Na(a,Ia(b.info));b=[];var c=8*a.A;56>a.c?Na(a,a.o,56-a.c):Na(a,a.o,a.b-(a.c-56));for(var d=a.b-1;56<=d;d--)a.v[d]=c&255,c/=256;S(a,a.v);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.a[d]>>e&255,++c;this.a=Ka(b)}
function Ra(a){if(!a.a)throw"no";return a.a}Oa.prototype.size=function(){if(!this.a)throw"no";return this.c};Oa.prototype.name=function(){if(!this.a)throw"no";return this.b};
function Pa(a,b){if("string"!==typeof a||"object"!==typeof b)throw"this should never happen";if(a!==Ia(b))throw"torrent formatted strange, unordered or javascript mangled it";if(!b.announce||!b.info)throw"torrent missing announce or info keys";a=b.info["meta version"]||1;if("number"!==typeof a)throw"torrent meta version NaN";var c=b.info["piece length"];if(!c||"number"!==typeof c||Math.log2(c)!==Math.floor(Math.log2(c))||2===a&&16384>c)throw"torrent piece length validation failed";if(!b.info.name||
"string"!==typeof b.info.name)throw"torrent: has no name";if(1===a){a=b.info.pieces;if(!a||"string"!==typeof a||0===a.length||0!==a.length/20%1)throw"torrent pieces validation failed";if(!(!!b.info.length^!!b.info.files))throw"torrent not single or multi?!";if(b.info.length&&!("number"===typeof b.info.length&&0<=b.info.length&&b.info.length<=Number.MAX_SAFE_INTEGER))throw"torrent: single, has bad length";if(b.info.files&&!b.info.files.map(function(d){return d.length&&"number"===typeof d.length&&0<=
d.length&&d.length<=Number.MAX_SAFE_INTEGER&&d.path&&Array.isArray(d.path)}).reduce(function(d,e){return d&&e}))throw"torrent: multi, has invalid files structure";}else{if(2===a)throw"bittorrent2: not tested or complete";throw"bittorrent meta version is unsupported";}}function Qa(a){return a.info.files?a.info.files.map(function(b){return b.length}).reduce(function(b,c){return b+c}):a.info.length};function Sa(){function a(k){function h(){if(r)u=!1,console.error("this should only happen during terminate");else{if(0<O&&0<fa.length&&!W){var l=fa.shift(),B=ha[l];W=!0;n.postMessage({i:l,d:B},[B]);ha[l]=null}X<=k.size&&!D&&6>O?(D=!0,O+=1,g.readAsArrayBuffer(k.slice(X,X+9728E3))):D||W||0!==O||P&&Q?P&&Q&&v():q()}}function q(){D?console.error("this should not happen"):P?Q||(g.onload=function(l){Q=l.target.result;D=!1;h()},D=!0,g.readAsArrayBuffer(k.slice(Math.max(k.size-65536,0),k.size))):(g.onload=
function(l){P=l.target.result;D=!1;h()},D=!0,g.readAsArrayBuffer(k.slice(0,Math.min(65536,k.size))))}function v(){var l={};ia+=k.size;H=H.add(C(k.size,!0));H=H.add(Aa(P));H=H.add(Aa(Q));l.mpc=H.toString(16).padStart(16,"0");1===Y.length?(l.ed2k=e(Y[0]),w(k,l)):(n.onmessage=function(B){l.ed2k=e(B.data.h);w(k,l)},n.postMessage({f:!0,hl:Y}),r=!0)}function w(l,B){f.onfilecomplete&&setTimeout(f.onfilecomplete,1,l,B);c()}function Z(l){if(f.onprogress){var B=t,R=ia;setTimeout(function(){f.onprogress(k,Ba[B]*
(l+1)*9728E3,Ca*(R+9728E3*(l+1)))},1)}}function Aa(l){var B=l.byteLength;l=new DataView(l);for(var R=A(0,0,!0),ja=null,ka=null,aa=0;aa<B;aa+=8){try{ka=l.getInt32(aa,!0),ja=l.getInt32(aa+4,!0)}catch(Da){if(Da instanceof RangeError)ja=ka=0;else throw Da;}R=R.add(A(ka,ja,!0))}return R}var X=0,la=0,O=0,ha=[],fa=[],D=!1,W=!1,Y=[],P=null,Q=null,H=A(0,0,!0);r=!1;n.onmessage=function(l){Y[l.data.i]=l.data.h;W=!1;l.data.d=null;--O;Z(l.data.i);h()};g.onload=function(l){ha[la]=l.target.result;fa.push(la);D=
!1;X+=9728E3;la+=1;h()};Z(-1);h()}function b(k){n||(n=k,n.onerror=function(h){r=!0;console.error("web worker error",h);f.onerror&&setTimeout(f.onerror,1,{message:"Something wrong with HTML5 Web Worker. The error is...\n\n"+h.message})})}function c(){y[++t]?Ea?1!==y.length?(f.onerror&&setTimeout(f.onerror,1,{message:"selected multiple torrent files"}),u=!1):d(y[t]):a(y[t]):(f.onallcomplete&&setTimeout(f.onallcomplete,1),u=!1)}function d(k){var h="";u=!0;33554432<k.size?(f.onerror&&setTimeout(f.onerror,
1,{message:"torrent over arbitrary limit of 32MiB"}),u=!1):(g.onload=function(q){h=String.fromCharCode.apply(null,new Uint8Array(q.target.result));try{var v=new Oa(h)}catch(Z){f.onerror&&setTimeout(f.onerror,1,{message:"torrent_parse says: "+Z});u=!1;return}q={name:v.name(),size:v.size(),type:"video/mp4",lastModified:Date.now()};var w={ed2k:Ra(v).slice(0,32),mpc:"abcdef0987654321"};40===Ra(v).length&&32===w.ed2k.length&&Ra(v).startsWith(w.ed2k)?(f.onprogress&&setTimeout(f.onprogress,1,q,1,1),f.onfilecomplete&&
setTimeout(f.onfilecomplete,2,q,w),f.onallcomplete&&setTimeout(f.onallcomplete,3),u=!1):f.onerror&&setTimeout(f.onerror,1,{message:"my dumb sanity checks failed"})},g.readAsArrayBuffer(k))}function e(k){var h="0123456789abcdef".split(""),q=new Uint32Array(k);k=q[0];var v=q[1],w=q[2];q=q[3];return h[k>>4&15]+h[k&15]+h[k>>12&15]+h[k>>8&15]+h[k>>20&15]+h[k>>16&15]+h[k>>28&15]+h[k>>24&15]+h[v>>4&15]+h[v&15]+h[v>>12&15]+h[v>>8&15]+h[v>>20&15]+h[v>>16&15]+h[v>>28&15]+h[v>>24&15]+h[w>>4&15]+h[w&15]+h[w>>
12&15]+h[w>>8&15]+h[w>>20&15]+h[w>>16&15]+h[w>>28&15]+h[w>>24&15]+h[q>>4&15]+h[q&15]+h[q>>12&15]+h[q>>8&15]+h[q>>20&15]+h[q>>16&15]+h[q>>28&15]+h[q>>24&15]}var f={onprogress:null,onfilecomplete:null,onallcomplete:null,onerror:null,isbusy:function(){return!0===u},execute:function(k){u?console.error("currently busy processing"):(n||b(new Worker("md4-worker.min.js")),y=k,Fa=y.reduce(function(h,q){return h+q.size},0),Ca=1/Fa,ia=0,Ba=y.map(function(h){return 1/h.size}),t=-1,u=!0,c())},terminate:function(){r=
!0},setworker:b,set_bittorrent_quirk:function(k){u||(Ea=k)}},g=new FileReader,n=null,y=null,t=-1,r=!0,u=!1,Fa=0,Ca=0,ia=0,Ba=[],Ea=!1;g.onerror=function(k){r=!0;console.error("read error",k.target.error);f.onerror&&setTimeout(f.onerror,1,{message:"Something wrong with HTML5 FileReader. The error is...\n\n"+k.target.error})};return f}var T=["ed2khash"],U=ma;T[0]in U||"undefined"==typeof U.execScript||U.execScript("var "+T[0]);
for(var V;T.length&&(V=T.shift());)T.length||void 0===Sa?U[V]&&U[V]!==Object.prototype[V]?U=U[V]:U=U[V]={}:U[V]=Sa;
